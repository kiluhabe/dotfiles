#!/usr/bin/env bash
#
# connection manager with rofi

# options rofi
menu='rofi -dmenu -i -p'

# set interfaces
wifi='wlo1'

onwifi='Enable Wifi'
selwifi='Wifi Menu'
reswifi='Restart Wifi'
offwifi='Disable Wifi'
onblue='Enable Bluetooth'
offblue='Disable Bluetooth'
selblue='Bluetooth Menu'

# create search menu
conn=$(echo -e "$onwifi\n$offwifi\n$reswifi\n$selwifi\n$onblue\n$offblue\n$selblue"| $menu connection-manager: )

# exit with no input
if [[ $? -eq 1 ]]; then
    exit 1
fi

# select rofi search provider
case $conn in
    $onwifi)
       notify-send 'Enabling Wifi...' && \
           nmcli device connect $wifi && \
           notify-send 'Wifi Enabled.' ;;
    $selwifi)
        st \
            -t "nmtui" \
            -n "nmtui" \
            -e "nmtui" ;;
    $reswifi)
       notify-send 'Restarting Wifi...' && \
            nmcli device disconnect $wifi && \
            sleep 3 && \
            nmcli device connect $wifi
            notify-send 'Wifi Restarted.' ;;
    $offwifi)
        notify-send 'Disabling Wifi...' && \
            nmcli device disconnect $wifi && \
            notify-send 'Wifi Disabled.' ;;
    $onblue)
        notify-send 'Enabling Bluetooth...' && \
            bluetoothctl power on
            notify-send 'Bluetooth Enabled.' ;;
    $offblue)
        notify-send 'Disabling Bluetooth...' && \
            bluetoothctl power off
            notify-send 'Bluetooth Disabled.' ;;
    $selblue)
        blueman-manager
esac
